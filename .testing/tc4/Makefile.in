FC = @FC@
LD = @LD@
FCFLAGS = @FCFLAGS@
LDFLAGS = @LDFLAGS@
LIBS = @LIBS@

OUT = topog.nc ocean_hgrid.nc temp_salt_ic.nc sponge.nc

all: $(OUT)

ocean_hgrid.nc topog.nc: gen_grid
	./gen_grid

temp_salt_ic.nc sponge.nc: gen_data
	./gen_data

gen_grid: gen_grid.F90
	$(FC) $(FCFLAGS) $(LDFLAGS) -o $@ $^ $(LIBS)

gen_data: gen_data.F90
	$(FC) $(FCFLAGS) $(LDFLAGS) -o $@ $^ $(LIBS)

.PHONY: clean
clean:
	rm -rf $(OUT) gen_grid gen_data

.PHONY: distclean
distclean: clean
	rm -f config.log
	rm -f config.status
	rm -f Makefile

.PHONY: ac-clean
ac-clean: distclean
	rm -f aclocal.m4
	rm -rf autom4te.cache
	rm -f configure
	rm -f configure~
